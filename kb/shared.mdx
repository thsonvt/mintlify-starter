---
title: 'Shared Highlight'
description: 'View a shared highlight from the Knowledge Base'
icon: 'share'
---

<div id="shared-highlight-app">
  <div style={{ padding: '40px 20px', textAlign: 'center', color: '#6b7280' }}>
    Loading shared highlight...
  </div>
</div>

<script dangerouslySetInnerHTML={{ __html: `
  function initSharedPage() {
    const app = document.getElementById('shared-highlight-app');
    if (!app) return;

    const API_URL = window.location.hostname === 'localhost'
      ? 'http://localhost:8787'
      : 'https://thought-leadership-api.thsonvt.workers.dev';

    // Get share ID from URL
    const params = new URLSearchParams(window.location.search);
    const shareId = params.get('id');

    if (!shareId) {
      renderError('No highlight ID provided');
      return;
    }

    async function loadSharedHighlight() {
      try {
        const response = await fetch(API_URL + '/api/shared/' + shareId);

        if (response.status === 404) {
          renderError('This highlight was not found or is no longer shared.');
          return;
        }

        if (!response.ok) throw new Error('Failed to load');

        const data = await response.json();
        renderHighlight(data.highlight);

      } catch (err) {
        console.error('Load error:', err);
        renderError('Failed to load the shared highlight.');
      }
    }

    function renderError(message) {
      app.innerHTML = \`
        <div style="padding: 60px 20px; text-align: center;">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#f87171" stroke-width="1.5" style="margin-bottom: 16px;">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
          <h2 style="margin: 0 0 8px 0; color: #111827; font-size: 20px;">Highlight not found</h2>
          <p style="margin: 0 0 20px 0; color: #6b7280;">\${escapeHtml(message)}</p>
          <a href="/kb/browse" style="display: inline-block; padding: 10px 20px; background: #10b981; color: white; border-radius: 8px; text-decoration: none; font-weight: 500;">
            Browse articles
          </a>
        </div>
      \`;
    }

    function renderHighlight(highlight) {
      const date = new Date(highlight.created_at).toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });

      app.innerHTML = \`
        <div style="max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(to bottom, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05)); border-left: 4px solid #10b981; padding: 24px; border-radius: 0 12px 12px 0; margin-bottom: 20px;">
            <blockquote style="margin: 0; font-size: 18px; line-height: 1.7; color: #1f2937; font-style: italic;">
              "\${escapeHtml(highlight.selected_text)}"
            </blockquote>
          </div>

          \${highlight.note ? \`
            <div style="padding: 16px; background: #f9fafb; border-radius: 8px; margin-bottom: 20px;">
              <div style="font-size: 12px; font-weight: 500; color: #6b7280; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.05em;">Note</div>
              <p style="margin: 0; color: #374151; font-size: 15px;">\${escapeHtml(highlight.note)}</p>
            </div>
          \` : ''}

          <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 16px; border-top: 1px solid #e5e7eb;">
            <span style="font-size: 13px; color: #9ca3af;">Highlighted on \${date}</span>
            <a href="/kb/articles/\${highlight.article_id}" style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: #10b981; color: white; border-radius: 6px; text-decoration: none; font-size: 14px; font-weight: 500;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
              </svg>
              Read full article
            </a>
          </div>
        </div>

        <div style="margin-top: 40px; padding-top: 24px; border-top: 1px solid #e5e7eb; text-align: center;">
          <p style="color: #6b7280; font-size: 14px; margin: 0 0 12px 0;">Want to save your own highlights?</p>
          <button onclick="window.highlightsAuth?.openModal('signup')" style="padding: 10px 20px; background: white; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer; color: #374151;">
            Create an account
          </button>
        </div>
      \`;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    loadSharedHighlight();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSharedPage);
  } else {
    initSharedPage();
  }
` }} />
